-- psql -U $POSTGRES_USER $POSTGRES_DB
CREATE SCHEMA IF NOT EXISTS cafeteria;

CREATE TABLE
    cafeteria.cafeteria_location (
        id int4 GENERATED BY DEFAULT AS IDENTITY,
        location_name varchar(100) NOT NULL,
        location_description varchar(200) NOT NULL,
        image_url varchar(500),
        PRIMARY KEY (id)
    );

CREATE TABLE
    cafeteria.week_day (
        id int4 GENERATED BY DEFAULT AS IDENTITY,
        weekday_name varchar(20) NOT NULL,
        PRIMARY KEY (id)
    );

CREATE TABLE
    cafeteria.location_business_hours (
        id int4 GENERATED BY DEFAULT AS IDENTITY,
        location_id int4 NOT NULL,
        weekday_id int4 NOT NULL,
        open_time time NOT NULL,
        close_time time NOT NULL,
        PRIMARY KEY (id),
        FOREIGN KEY (location_id) REFERENCES cafeteria.cafeteria_location (id),
        FOREIGN KEY (weekday_id) REFERENCES cafeteria.week_day (id)
    );

CREATE TABLE
    cafeteria.station (
        id int4 GENERATED BY DEFAULT AS IDENTITY,
        location_id int4 NOT NULL,
        station_name varchar(50) NOT NULL,
        station_description varchar(200) NOT NULL,
        PRIMARY KEY (id),
        FOREIGN KEY (location_id) REFERENCES cafeteria.cafeteria_location (id)
    );

CREATE TABLE
    cafeteria.station_business_hours (
        id int4 GENERATED BY DEFAULT AS IDENTITY,
        station_id int4 NOT NULL,
        weekday_id int4 NOT NULL,
        open_time time NOT NULL,
        close_time time NOT NULL,
        PRIMARY KEY (id),
        FOREIGN KEY (station_id) REFERENCES cafeteria.station (id),
        FOREIGN KEY (weekday_id) REFERENCES cafeteria.week_day (id)
    );

CREATE TABLE
    cafeteria.entree (
        id int4 GENERATED BY DEFAULT AS IDENTITY,
        station_id int4 NOT NULL,
        entree_name varchar(100) NOT NULL,
        entree_description varchar(200),
        entree_price decimal NOT NULL,
        image_url varchar(500),
        PRIMARY KEY (id),
        FOREIGN KEY (station_id) REFERENCES cafeteria.station (id)
    );

CREATE TABLE
    cafeteria.side (
        id int4 GENERATED BY DEFAULT AS IDENTITY,
        station_id int4 NOT NULL,
        side_name varchar(100) NOT NULL,
        side_description varchar(200),
        side_price decimal NOT NULL,
        image_url varchar(500),
        PRIMARY KEY (id),
        FOREIGN KEY (station_id) REFERENCES cafeteria.station (id)
    );

CREATE TABLE
    cafeteria.drink (
        id int4 GENERATED BY DEFAULT AS IDENTITY,
        station_id int4 NOT NULL,
        drink_name varchar(100) NOT NULL,
        drink_description varchar(200),
        drink_price decimal NOT NULL,
        image_url varchar(500),
        PRIMARY KEY (id),
        FOREIGN KEY (station_id) REFERENCES cafeteria.station (id)
    );

CREATE TABLE
    cafeteria.meal (
        id int4 GENERATED BY DEFAULT AS IDENTITY,
        entree_id int4 NOT NULL,
        side_id int4,
        drink_id int4 NOT NULL,
        PRIMARY KEY (id),
        FOREIGN KEY (entree_id) REFERENCES cafeteria.entree (id),
        FOREIGN KEY (side_id) REFERENCES cafeteria.side (id),
        FOREIGN KEY (drink_id) REFERENCES cafeteria.drink (id)
    );

CREATE TABLE
    cafeteria.food_option_type (
        id int4 GENERATED BY DEFAULT AS IDENTITY,
        food_option_type_name varchar(50) NOT NULL,
        num_included int2 NOT NULL,
        max_amount int4 NOT NULL,
        food_option_price decimal NOT NULL,
        entree_id int4,
        side_id int4,
        PRIMARY KEY (id)
    );

CREATE TABLE
    cafeteria.food_option (
        id int4 GENERATED BY DEFAULT AS IDENTITY,
        food_option_name varchar(100) NOT NULL,
        in_stock boolean NOT NULL DEFAULT true,
        image_url varchar(500),
        PRIMARY KEY (id)
    );

CREATE TABLE
    cafeteria.option_option_type (
        id int4 GENERATED BY DEFAULT AS IDENTITY,
        food_option_id int4 NOT NULL,
        food_option_type_id int4 NOT NULL,
        PRIMARY KEY (id)
    );

INSERT INTO
    cafeteria.cafeteria_location (location_name, location_description, image_url)
VALUES
    (
        'Badger Den',
        'Located on the main floor of the Greenwood Student Center',
        'https://picsum.photos/id/292/300/200'
    ),
    (
        'Busters Bistro',
        'Located on the main floor of the Karen H Huntsman Library',
        'https://picsum.photos/id/326/300/200'
    );

INSERT INTO
    cafeteria.week_day (weekday_name)
VALUES
    ('Monday'),
    ('Tuesday'),
    ('Wednesday'),
    ('Thursday'),
    ('Friday'),
    ('Saturday'),
    ('Sunday');

INSERT INTO
    cafeteria.location_business_hours (location_id, weekday_id, open_time, close_time)
VALUES
    -- Badger Den hours (Mon-Fri)
    (1, 1, '08:00:00', '19:30:00'),
    (1, 2, '08:00:00', '19:30:00'),
    (1, 3, '08:00:00', '19:30:00'),
    (1, 4, '08:00:00', '19:30:00'),
    (1, 5, '08:00:00', '19:30:00'),
    -- Badger Den Weekend hours (Sat-Sun)
    (1, 6, '17:00:00', '19:00:00'),
    (1, 7, '17:00:00', '19:00:00'),
    -- Busters Bistro hours (Mon-Fri)
    (2, 1, '10:00:00', '19:30:00'),
    (2, 2, '10:00:00', '19:30:00'),
    (2, 3, '10:00:00', '19:30:00'),
    (2, 4, '10:00:00', '19:30:00'),
    (2, 5, '10:00:00', '15:00:00');

INSERT INTO
    cafeteria.station (location_id, station_name, station_description)
VALUES
    (1, 'Breakfast', 'Hot breakfast entrees and sides'),
    (1, 'Deli', 'Fresh made-to-order sandwiches'),
    (1, 'Grill', 'Hot entrees and burgers'),
    (
        1,
        'Pizza',
        'Fresh pizza with your choice of toppings'
    ),
    (2, 'Wraps', 'Fresh wraps and healthy options');

    INSERT INTO
        cafeteria.station_business_hours (station_id, weekday_id, open_time, close_time)
    VALUES
        -- Breakfast hours (Mon-Fri)
        (1, 1, '08:00:00', '11:00:00'),
        (1, 2, '08:00:00', '11:00:00'),
        (1, 3, '08:00:00', '11:00:00'),
        (1, 4, '08:00:00', '11:00:00'),
        (1, 5, '08:00:00', '11:00:00'),
        -- Deli Weekday hours (Mon-Fri)
        (2, 1, '11:00:00', '19:30:00'),
        (2, 2, '11:00:00', '19:30:00'),
        (2, 3, '11:00:00', '19:30:00'),
        (2, 4, '11:00:00', '19:30:00'),
        (2, 5, '11:00:00', '19:30:00'),
        -- Deli Weekend hours (Sat-Sun)
        (2, 6, '17:00:00', '19:00:00'),
        (2, 7, '17:00:00', '19:00:00'),
        -- Grill Lunch/Dinner hours (Mon-Fri)
        (3, 1, '11:00:00', '19:30:00'),
        (3, 2, '11:00:00', '19:30:00'),
        (3, 3, '11:00:00', '19:30:00'),
        (3, 4, '11:00:00', '19:30:00'),
        (3, 5, '11:00:00', '19:30:00'),
        -- Grill Weekend hours (Sat-Sun)
        (3, 6, '17:00:00', '19:00:00'),
        (3, 7, '17:00:00', '19:00:00'),
        -- Pizza Weekday hours (Mon-Fri)
        (4, 1, '11:00:00', '19:30:00'),
        (4, 2, '11:00:00', '19:30:00'),
        (4, 3, '11:00:00', '19:30:00'),
        (4, 4, '11:00:00', '19:30:00'),
        (4, 5, '11:00:00', '19:30:00'),
        -- Pizza Weekend hours (Sat-Sun)
        (4, 6, '17:00:00', '19:00:00'),
        (4, 7, '17:00:00', '19:00:00'),
        -- Wraps hours (Mon-Fri)
        (5, 1, '10:00:00', '19:30:00'),
        (5, 2, '10:00:00', '19:30:00'),
        (5, 3, '10:00:00', '19:30:00'),
        (5, 4, '10:00:00', '19:30:00'),
        (5, 5, '10:00:00', '15:00:00');

INSERT INTO
    cafeteria.entree (
        station_id,
        entree_name,
        entree_description,
        entree_price,
        image_url
    )
VALUES
    (
        1,
        'Breakfast Burrito',
        'Scrambled eggs, cheese, and your choice of meat wrapped in a warm tortilla',
        4.99,
        'https://picsum.photos/id/488/150/150'
    ),
    (
        1,
        'Breakfast Sandwich',
        'Scrambled eggs, cheese, and your choice of meat on a toasted English muffin',
        4.29,
        'https://picsum.photos/id/431/150/150'
    ),
    (
        1,
        'Breakfast Plate',
        'Breakfast sides including eggs, toast, and your choice of meat',
        4.29,
        'https://picsum.photos/id/431/150/150'
    ),
    (
        3,
        'Chicken Quesadilla',
        'Grilled chicken and cheese in a warm tortilla',
        5.29,
        'https://picsum.photos/id/431/150/150'
    ),
    (
        3,
        'Steak Quesadilla',
        'Grilled steak and cheese in a warm tortilla',
        5.49,
        'https://picsum.photos/id/431/150/150'
    ),
    (
        3,
        'Cheese Quesadilla',
        'Grilled cheese in a warm tortilla',
        3.99,
        'https://picsum.photos/id/431/150/150'
    ),
    (
        4,
        'Two Toppings Pizza',
        'Small pizza with two toppings',
        5.69,
        'https://picsum.photos/id/365/150/150'
    ),
    (
        2,
        'Deli Sandwich',
        'A sandwich with your choice of meat, cheese, toppings, and dressing',
        6.79,
        'https://picsum.photos/id/431/150/150'
    );

INSERT INTO
    cafeteria.side (
        station_id,
        side_name,
        side_description,
        side_price,
        image_url
    )
VALUES
    (
        1,
        'Hashbrowns',
        'Crispy golden hashbrowns',
        1.49,
        'https://picsum.photos/id/550/150/150'
    ),
    (
        2,
        'Chips',
        'Your choice of crispy chips from the selection on the shelf',
        0.89,
        'https://picsum.photos/id/1010/150/150'
    ),
    (
        3,
        'Rice',
        'Steamed white rice',
        1.79,
        'https://picsum.photos/id/550/150/150'
    ),
    (
        3,
        'Vegetables',
        'Steamed mixed vegetables',
        1.79,
        'https://picsum.photos/id/550/150/150'
    ),
    (
        3,
        'Waffle Fries',
        'Crispy golden waffle fries',
        2.29,
        'https://picsum.photos/id/550/150/150'
    ),
    (
        4,
        'Chips',
        'Crispy chips',
        0.89,
        'https://picsum.photos/id/1010/150/150'
    );

INSERT INTO
    cafeteria.drink (
        station_id,
        drink_name,
        drink_description,
        drink_price,
        image_url
    )
VALUES
    (
        1,
        'Slushies',
        'Assorted soft drinks',
        1.49,
        'https://picsum.photos/id/163/150/150'
    ),
    (
        2,
        'Tea/Coffee Machine',
        'Freshly brewed iced tea',
        1.49,
        'https://picsum.photos/id/225/150/150'
    );

INSERT INTO
    cafeteria.food_option (food_option_name, in_stock, image_url)
VALUES
    (
        'Extra Cheese',
        true,
        'https://picsum.photos/id/312/150/150'
    ),
    (
        'Pepperoni',
        true,
        'https://picsum.photos/id/326/150/150'
    ),
    (
        'Sausage',
        true,
        'https://picsum.photos/id/340/150/150'
    ),
    (
        'Bacon',
        true,
        'https://picsum.photos/id/352/150/150'
    ),
    (
        'Chicken',
        true,
        'https://picsum.photos/id/361/150/150'
    ),
    (
        'Ham',
        true,
        'https://picsum.photos/id/372/150/150'
    ),
    (
        'Olives',
        true,
        'https://picsum.photos/id/384/150/150'
    ),
    (
        'Mushrooms',
        true,
        'https://picsum.photos/id/395/150/150'
    ),
    (
        'Onions',
        true,
        'https://picsum.photos/id/408/150/150'
    ),
    (
        'Pineapple',
        true,
        'https://picsum.photos/id/419/150/150'
    ),
    (
        'Bell Peppers',
        true,
        'https://picsum.photos/id/428/150/150'
    ),
    (
        'Banana Peppers',
        true,
        'https://picsum.photos/id/437/150/150'
    ),
    (
        'Scrambled Eggs',
        true,
        'https://picsum.photos/id/445/150/150'
    ),
    (
        'Potatoes',
        true,
        'https://picsum.photos/id/446/150/150'
    ),
    (
        'One Slice of Toast',
        true,
        'https://picsum.photos/id/447/150/150'
    ),
    (
        'Breakfast Bacon',
        true,
        'https://picsum.photos/id/478/150/150'
    ),
    (
        'Breakfast Sausage',
        true,
        'https://picsum.photos/id/489/150/150'
    ),
    (
        'Breakfast Ham',
        true,
        'https://picsum.photos/id/490/150/150'
    ),
    (
        'White Bread',
        true,
        'https://picsum.photos/id/490/150/150'
    ),
    (
        'Wheat',
        true,
        'https://picsum.photos/id/490/150/150'
    ),
    (
        'Marble Rye',
        true,
        'https://picsum.photos/id/490/150/150'
    ),
    (
        'Sourdough',
        true,
        'https://picsum.photos/id/490/150/150'
    ),
    (
        'American',
        true,
        'https://picsum.photos/id/491/150/150'
    ),
    (
        'Cheddar',
        true,
        'https://picsum.photos/id/492/150/150'
    ),
    (
        'Provolone',
        true,
        'https://picsum.photos/id/493/150/150'
    ),
    (
        'Pepper Jack',
        true,
        'https://picsum.photos/id/494/150/150'
    ),
    (
        'Swiss',
        true,
        'https://picsum.photos/id/495/150/150'
    ),
    (
        'Mozzarella',
        true,
        'https://picsum.photos/id/496/150/150'
    ),
    -- Deli Meats
    (
        'Turkey',
        true,
        'https://picsum.photos/id/497/150/150'
    ),
    (
        'Roast Beef',
        true,
        'https://picsum.photos/id/498/150/150'
    ),
    (
        'Tuna Salad',
        true,
        'https://picsum.photos/id/499/150/150'
    ),
    (
        'Grilled Chicken',
        true,
        'https://picsum.photos/id/500/150/150'
    ),
    -- Deli Toppings
    (
        'Lettuce',
        true,
        'https://picsum.photos/id/501/150/150'
    ),
    (
        'Tomato',
        true,
        'https://picsum.photos/id/502/150/150'
    ),
    (
        'Pickles',
        true,
        'https://picsum.photos/id/503/150/150'
    ),
    (
        'Red Onion',
        true,
        'https://picsum.photos/id/504/150/150'
    ),
    (
        'Cucumber',
        true,
        'https://picsum.photos/id/505/150/150'
    ),
    (
        'Spinach',
        true,
        'https://picsum.photos/id/506/150/150'
    ),
    (
        'Green Peppers',
        true,
        'https://picsum.photos/id/507/150/150'
    ),
    -- Deli Dressings
    (
        'Mayo',
        true,
        'https://picsum.photos/id/508/150/150'
    ),
    (
        'Mustard',
        true,
        'https://picsum.photos/id/509/150/150'
    ),
    (
        'Ranch',
        true,
        'https://picsum.photos/id/510/150/150'
    ),
    (
        'Italian Dressing',
        true,
        'https://picsum.photos/id/511/150/150'
    ),
    (
        'Honey Mustard',
        true,
        'https://picsum.photos/id/512/150/150'
    ),
    (
        'Oil and Vinegar',
        true,
        'https://picsum.photos/id/513/150/150'
    );

INSERT INTO
    cafeteria.food_option_type (
        food_option_type_name,
        num_included,
        max_amount,
        food_option_price,
        entree_id,
        side_id
    )
VALUES
    -- Breakfast Plate options (entree_id 3)
    ('Plate Base', 1, 1, 0.00, 3, NULL),
    ('Meat Choice', 1, 1, 0.00, 3, NULL),
    -- Two Toppings Pizza (entree_id 7)
    ('Toppings', 2, 12, 0.89, 7, NULL),
    -- Deli sandwich (entree_id 8)
    ('Bread', 1, 1, 0.00, 8, NULL),
    ('Meat', 1, 1, 0.75, 8, NULL),
    ('Cheese', 1, 1, 0.00, 8, NULL),
    ('Toppings', 3, 10, 0.50, 8, NULL),
    ('Dressing', 1, 1, 0.00, 8, NULL);

INSERT INTO
    cafeteria.option_option_type (food_option_id, food_option_type_id)
VALUES
    (13, 1), -- Scrambled Eggs -> Plate Base
    (14, 1), -- Potatoes -> Plate Base
    (15, 1), -- One Slice of Toast -> Plate Base
    (16, 2), -- Breakfast Bacon -> Meat Choice
    (17, 2), -- Breakfast Sausage -> Meat Choice
    (18, 2), -- Breakfast Ham -> Meat Choice
    (1, 3), -- Extra Cheese -> Toppings
    (2, 3), -- Pepperoni -> Toppings
    (3, 3), -- Sausage -> Toppings
    (4, 3), -- Bacon -> Toppings
    (5, 3), -- Chicken -> Toppings
    (6, 3), -- Ham -> Toppings
    (7, 3), -- Olives -> Toppings
    (8, 3), -- Mushrooms -> Toppings
    (9, 3), -- Onions -> Toppings
    (10, 3), -- Pineapple -> Toppings
    (11, 3), -- Bell Peppers -> Toppings
    (12, 3), -- Banana Peppers -> Toppings
    (19, 4), -- White Bread -> Bread
    (20, 4), -- Wheat -> Bread
    (21, 4), -- Marble Rye -> Bread
    (22, 4), -- Sourdough -> Bread
    (29, 5), -- Turkey -> Meat
    (30, 5), -- Roast Beef -> Meat
    (6, 5), -- Ham -> Meat (reusing from pizza toppings)
    (4, 5), -- Bacon -> Meat (reusing from pizza toppings)
    (31, 5), -- Tuna Salad -> Meat
    (32, 5), -- Grilled Chicken -> Meat
    (23, 6), -- American -> Cheese
    (24, 6), -- Cheddar -> Cheese
    (25, 6), -- Provolone -> Cheese
    (26, 6), -- Pepper Jack -> Cheese
    (27, 6), -- Swiss -> Cheese
    (28, 6), -- Mozzarella -> Cheese
    (33, 7), -- Lettuce -> Toppings
    (34, 7), -- Tomato -> Toppings
    (35, 7), -- Pickles -> Toppings
    (36, 7), -- Red Onion -> Toppings
    (37, 7), -- Cucumber -> Toppings
    (38, 7), -- Spinach -> Toppings
    (39, 7), -- Green Peppers -> Toppings
    (40, 8), -- Mayo -> Dressing
    (41, 8), -- Mustard -> Dressing
    (42, 8), -- Ranch -> Dressing
    (43, 8), -- Italian Dressing -> Dressing
    (44, 8), -- Honey Mustard -> Dressing
    (45, 8);

-- Oil and Vinegar -> Dressing
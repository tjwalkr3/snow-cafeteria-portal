-- psql -U $POSTGRES_USER $POSTGRES_DB

CREATE SCHEMA IF NOT EXISTS cafeteria;

CREATE TABLE cafeteria.cafeteria_location (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    location_name varchar(100) NOT NULL,
    location_description varchar(200) NOT NULL,
    location_address varchar(200) NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE cafeteria.week_day (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    weekday_name varchar(20) NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE cafeteria.location_business_hours (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    location_id int4 NOT NULL,
    weekday_id int4 NOT NULL,
    open_time time NOT NULL,
    close_time time NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (location_id) REFERENCES cafeteria.cafeteria_location(id),
    FOREIGN KEY (weekday_id) REFERENCES cafeteria.week_day(id)
);

CREATE TABLE cafeteria.station (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    location_id int4 NOT NULL,
    station_name varchar(100) NOT NULL,
    station_description varchar(200) NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (location_id) REFERENCES cafeteria.cafeteria_location(id)
);

CREATE TABLE cafeteria.ingredient_type (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    type_name varchar(100) NOT NULL,
    quantity int4 NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE cafeteria.ingredient (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    ingredient_name varchar(100) NOT NULL,
    image_url varchar(300),
    ingredient_price decimal,
    PRIMARY KEY (id)
);

CREATE TABLE cafeteria.ingredient_ingredient_type (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    ingredient_type_id int4 NOT NULL,
    ingredient_id int4 NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (ingredient_type_id) REFERENCES cafeteria.ingredient_type(id),
    FOREIGN KEY (ingredient_id) REFERENCES cafeteria.ingredient(id)
);

CREATE TABLE cafeteria.food_item (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    station_id int4 NOT NULL,
    item_description varchar(200),
    image_url varchar(300),
    item_price decimal NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (station_id) REFERENCES cafeteria.station(id)
);

CREATE TABLE cafeteria.food_item_ingredient_type (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    food_item_id int4 NOT NULL,
    ingredient_type_id int4 NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (food_item_id) REFERENCES cafeteria.food_item(id),
    FOREIGN KEY (ingredient_type_id) REFERENCES cafeteria.ingredient_type(id)
);

CREATE TABLE cafeteria.food_builder_item_ingredient (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    food_item_id int4 NOT NULL,
    ingredient_id int4 NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (food_item_id) REFERENCES cafeteria.food_item(id),
    FOREIGN KEY (ingredient_id) REFERENCES cafeteria.ingredient(id)
);

INSERT INTO cafeteria.cafeteria_location (location_name, location_description, location_address) VALUES
    ('Badger Den', 'Located on the main floor of the Greenwood Student Center', '242-260 E 100 N, Ephraim, UT 84627'),
    ('Breakfast', 'Located on the main floor of the Greenwood Student Center', '242-260 E 100 N, Ephraim, UT 84627'),
    ('Busters Bistro', 'Located on the main floor of the Karen H Huntsman Library', '141 E Center St, Ephraim, UT 84627');

INSERT INTO cafeteria.week_day (weekday_name) VALUES
    ('Monday'),
    ('Tuesday'),
    ('Wednesday'),
    ('Thursday'),
    ('Friday'),
    ('Saturday'),
    ('Sunday');

INSERT INTO cafeteria.location_business_hours (location_id, weekday_id, open_time, close_time) VALUES
    (1, 1, '11:00:00', '19:30:00'),
    (1, 2, '11:00:00', '19:30:00'),
    (1, 3, '11:00:00', '19:30:00'),
    (1, 4, '11:00:00', '19:30:00'),
    (1, 5, '11:00:00', '19:30:00'),
    (1, 6, '17:00:00', '19:00:00'),
    (1, 7, '17:00:00', '19:00:00'),
    (2, 1, '08:00:00', '11:00:00'),
    (2, 2, '08:00:00', '11:00:00'),
    (2, 3, '08:00:00', '11:00:00'),
    (2, 4, '08:00:00', '11:00:00'),
    (2, 5, '08:00:00', '11:00:00'),
    (3, 1, '10:00:00', '19:30:00'),
    (3, 2, '10:00:00', '19:30:00'),
    (3, 3, '10:00:00', '19:30:00'),
    (3, 4, '10:00:00', '19:30:00'),
    (3, 5, '10:00:00', '15:00:00');

INSERT INTO cafeteria.station (id, location_id, station_name, station_description) VALUES
    (1, 1, 'Sandwich', 'Fresh made-to-order sandwiches'),
    (2, 1, 'Grill', 'Burgers, grilled items, and hot entrees'),
    (3, 1, 'Pizza', 'Hand-tossed pizzas with customizable toppings'),
    (4, 2, 'Breakfast Grill', 'Breakfast sandwiches, eggs, and pancakes'),
    (5, 3, 'Wraps', 'Fresh wraps with various fillings');

INSERT INTO cafeteria.ingredient_type (id, type_name) VALUES
    (1, 'Omelet Ingredients'),
    (2, 'Breakfast Sandwich Bread'),
    (3, 'Breakfast Sandwich Cheese'),
    (4, 'Breakfast Sandwich Meats'),
    (5, 'Breakfast Burrito Meats'),
    (6, 'Side of two eggs'),
    (7, 'Breakfast Plate'),
    (8, 'Pizza Toppings'),
    (9, 'Deli Meats'),
    (10, 'Deli Cheeses'),
    (11, 'Deli Toppings'),
    (12, 'Deli Dressings'),
    (13, 'Deli Extra Cheeses'),
    (14, 'Deli Extra Meats'),
    (15, 'Bistro Meats'),
    (16, 'Bistro Cheeses'),
    (17, 'Bistro Toppings'),
    (18, 'Bistro Dressings'),
    (19, 'Bistro Extra Cheeses'),
    (20, 'Bistro Extra Meats');


INSERT INTO cafeteria.ingredient (id, ingredient_name) VALUES
    
    -- Eggs
    (1, '1 Egg'),
    (2, '2 Eggs'),
    (3, '3 Eggs'),
    (4, 'Eggs Scrambled'),
    (5, 'Eggs Over Easy'),
    (6, 'Eggs Over Hard'),
    (7, 'Eggs Sunny Side Up'),

    -- Breakfast Breads
    (8, 'Croissant'),
    (9, 'English Muffin'),
    (10, 'Biscuit'),
    (11, 'Bagel'),

    -- Meats
    (12, 'Sausage'),
    (13, 'Bacon'),
    (14, 'Ham'),
    (15, 'Pepperoni'),
    (16, 'Grilled Chicken'),
    (17, 'Pastrami'),
    (18, 'Chicken Salad'),
    (19, 'Tuna Salad'),
    (51, 'Turkey'),


    -- Cheeses
    (20, 'American'),
    (21, 'Cheddar'),
    (22, 'Pepper Jack'),
    (23, 'Provolone'),
    (24, 'Mozzarella'),
    (25, 'Swiss'),

    -- Toppings
    (26, 'Bell Peppers'),
    (27, 'Potatoes'),
    (28, 'Onions'),
    (29, 'Mushrooms'),
    (30, 'Black Olives'),
    (31, 'Banana Peppers'),
    (32, 'Pineapple'),
    (33, 'Extra Cheese'),
    (34, 'Spinach'),
    (35, 'Romaine'),
    (36, 'Green Leaf'),
    (37, 'Cucumbers'),
    (38, 'Tomatoes'),
    (39, 'Sprouts'),
    (40, 'Pickles'),
    (52, 'Lettuce'),

    -- Dressings
    (41, 'Oil'),
    (42, 'Vinegar'),
    (43, 'Ranch'),
    (44, '1000 Island'),
    (45, 'Italian'),
    (46, 'Caesar'),
    (47, 'Raspberry Vinaigrette'),
    (48, 'Honey Mustard'),
    (49, 'Mayonnaise'),
    (50, 'Mustard')

INSERT INTO cafeteria.ingredient_ingredient_type (ingredient_type_id, ingredient_id) VALUES
    1, 12
    1 14
    1 13
    1 26
    1 27
    1 20
    1 21
    1 22
    1 28
    1 29

    2 8
    2 9
    2 10
    2 11

    3 20
    3 25
    3 21
    3 22

    4 12
    4 13
    4 14

    5 12
    5 13
    5 14

    6 4
    6 5
    6 7

    7 12
    7 13
    7 1
    7 2
    7 3
    7 4
    7 5
    7 6
    7 7

    8 14
    8 13
    8 12
    8 28
    8 15
    8 16
    8 30
    8 26
    8 31
    8 32
    8 29
    8 33

    9 14
    9 51
    9 17
    9 16
    9 13
    9 18
    9 19

    10 20
    10 23
    10 21
    10 22
    10 25
    10 24

    11 34
    11 35
    11 36
    11 30
    11 37
    11 38
    11 39
    11 26
    11 28
    11 40
    11 31

    12 41
    12 42
    12 43
    12 44
    12 45
    12 46
    12 47
    12 48
    12 49
    12 50

    13 20
    13 23
    13 21
    13 22
    13 25
    13 24

    14 14
    14 51
    14 17
    14 16
    14 13
    14 18
    14 19

    15 14
    15 51
    15 13
    15 16

    16 20
    16 23
    16 21
    16 22
    16 25

    17 34
    17 52
    17 30
    17 37
    17 38
    17 39
    17 26
    17 28
    17 40 
    17 31

    18 41
    18 42
    18 43
    18 44
    18 45
    18 46
    18 47
    18 48
    18 49
    18 50

    19 20
    19 23
    19 21
    19 22
    
    20 14
    20 51
    20 13
    20 16


INSERT INTO cafeteria.food_item (id, station_id, item_description, item_price) VALUES
    (1, 1, 'Pretzel Bun Sandwich',),
    (2, 1, 'Marble Rye Sandwich',),
    (3, 1, 'Sourdough Sandwich',),
    (4, 1, 'Wheat Sandwich',),
    (5, 1, 'Garlic Flat Bread Sandwich',),
    (6, 1, 'White Bread Sandwich',),
    (7, 1, 'Salad',),

    (8, 2, 'Hamburger', ),
    (9, 2, 'Cheeseburger', ),
    (10, 2, 'Double Cheeseburger', ),
    (11, 2, 'Bacon Cheeseburger', ),
    (12, 2, 'Double Bacon Cheeseburger', ),
    (13, 2, 'Turkey Burger', ),
    (14, 2, 'Veggie Burger', ),
    (15, 2, 'Grilled Chicken Sandwich', ),
    (16, 2, 'Grilled Chicken Breast', ),
    (17, 2, 'Breaded Chicken Breast', ),
    (18, 2, 'Breaded Chicken Sandwich', ),
    (19, 2, 'Philly Cheesesteak', ),
    (20, 2, 'Chicken Cheesesteak', ),
    (21, 2, 'Badger Burger', ),
    (22, 2, 'BLT', ),
    (23, 2, 'Fish Fillet', ),
    (24, 2, 'Fish Fillet Sandwich', ),
    (25, 2, 'Grilled Cheese', ),
    (26, 2, 'Grilled Cheese and Ham', ),
    (27, 2, 'Cheese Quesadilla', ),
    (28, 2, 'Chicken Quesadilla', ),
    (29, 2, 'Steak Quesadilla', ),
    (30, 2, 'French Fries', ),
    (31, 2, 'Waffle Fries', ),
    (32, 2, 'Onion Rings', ),
    (33, 2, 'Tater Tots', ),
    (34, 2, 'Corn Dog', ),
    (35, 2, 'Chicken Nuggets', ),

    (36, 3, 'Single Pizza', ),
    (37, 3, 'Large Pizza', ),

    (38, 4, 'Breakfast Plate', ),
    (39, 4, 'Omelet', ),
    (40, 4, 'Breakfast Sandwich', ),
    (41, 4, 'Breakfast Burrito', ),
    (42, 4, 'Side of Two Eggs', ),
    (43, 4, 'French Toast', ),
    (44, 4, 'Pancake', ),
    (45, 4, 'Pancakes', ),
    (46, 4, 'Bacon', ),
    (47, 4, 'Sausage', ),
    (48, 4, 'Potatoes', ),
    (49, 4, 'Tater Tots', ),
    (50, 4, 'Toast', )

    (51, 5, 'Spinach Wrap', ),
    (52, 5, 'Chipotle Wrap', ),
    (53, 5, 'Garlic-N-Herb Wrap', );

INSERT INTO cafeteria.food_item_ingredient_type (food_item_id, ingredient_type_id) VALUES
    1 9
    1 10
    1 11 
    1 12
    1 13
    1 14
    2 9
    2 10
    2 11
    2 12
    2 13
    2 14
    3 9
    3 10
    3 11
    3 12
    3 13
    3 14
    4 9
    4 10
    4 11
    4 12
    4 13
    4 14
    5 9
    5 10
    5 11
    5 12
    5 13
    5 14
    6 9
    6 10
    6 11
    6 12
    6 13
    6 14
    7 9
    7 10
    7 11
    7 12
    7 13
    7 14

    36 8
    37 8

    38 7
    39 1
    40 2
    40 3
    40 4
    41 5
    42 6

    51 15
    51 16
    51 17
    51 18
    51 19
    51 20
    
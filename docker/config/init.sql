-- psql -U $POSTGRES_USER $POSTGRES_DB

CREATE SCHEMA IF NOT EXISTS cafeteria;

CREATE TABLE cafeteria.cafeteria_location (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    location_name varchar(100) NOT NULL,
    location_description varchar(200) NOT NULL,
    location_address varchar(200) NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE cafeteria.week_day (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    weekday_name varchar(20) NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE cafeteria.location_business_hours (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    location_id int4 NOT NULL,
    weekday_id int4 NOT NULL,
    open_time time NOT NULL,
    close_time time NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (location_id) REFERENCES cafeteria.cafeteria_location(id),
    FOREIGN KEY (weekday_id) REFERENCES cafeteria.week_day(id)
);

CREATE TABLE cafeteria.station (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    location_id int4 NOT NULL,
    station_name varchar(100) NOT NULL,
    station_description varchar(200) NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (location_id) REFERENCES cafeteria.cafeteria_location(id)
);

CREATE TABLE cafeteria.ingredient_type (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    type_name varchar(100) NOT NULL,
    quantity int4 NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE cafeteria.ingredient (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    ingredient_name varchar(100) NOT NULL,
    image_url varchar(300),
    ingredient_price decimal,
    PRIMARY KEY (id)
);

CREATE TABLE cafeteria.ingredient_ingredient_type (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    ingredient_type_id int4 NOT NULL,
    ingredient_id int4 NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (ingredient_type_id) REFERENCES cafeteria.ingredient_type(id),
    FOREIGN KEY (ingredient_id) REFERENCES cafeteria.ingredient(id)
);

CREATE TABLE cafeteria.food_item (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    station_id int4 NOT NULL,
    item_description varchar(200),
    image_url varchar(300),
    item_price decimal NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (station_id) REFERENCES cafeteria.station(id)
);

CREATE TABLE cafeteria.food_item_ingredient_type (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    food_item_id int4 NOT NULL,
    ingredient_type_id int4 NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (food_item_id) REFERENCES cafeteria.food_item(id),
    FOREIGN KEY (ingredient_type_id) REFERENCES cafeteria.ingredient_type(id)
);

CREATE TABLE cafeteria.food_builder_item_ingredient (
    id int4 GENERATED BY DEFAULT AS IDENTITY,
    food_item_id int4 NOT NULL,
    ingredient_id int4 NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (food_item_id) REFERENCES cafeteria.food_item(id),
    FOREIGN KEY (ingredient_id) REFERENCES cafeteria.ingredient(id)
);

INSERT INTO cafeteria.cafeteria_location (location_name, location_description, location_address) VALUES
    ('Badger Den', 'Located on the main floor of the Greenwood Student Center', '242-260 E 100 N, Ephraim, UT 84627'),
    ('Breakfast', 'Located on the main floor of the Greenwood Student Center', '242-260 E 100 N, Ephraim, UT 84627'),
    ('Busters Bistro', 'Located on the main floor of the Karen H Huntsman Library', '141 E Center St, Ephraim, UT 84627');

INSERT INTO cafeteria.week_day (weekday_name) VALUES
    ('Monday'),
    ('Tuesday'),
    ('Wednesday'),
    ('Thursday'),
    ('Friday'),
    ('Saturday'),
    ('Sunday');

INSERT INTO cafeteria.location_business_hours (location_id, weekday_id, open_time, close_time) VALUES
    (1, 1, '11:00:00', '19:30:00'),
    (1, 2, '11:00:00', '19:30:00'),
    (1, 3, '11:00:00', '19:30:00'),
    (1, 4, '11:00:00', '19:30:00'),
    (1, 5, '11:00:00', '19:30:00'),
    (1, 6, '17:00:00', '19:00:00'),
    (1, 7, '17:00:00', '19:00:00'),
    (2, 1, '08:00:00', '11:00:00'),
    (2, 2, '08:00:00', '11:00:00'),
    (2, 3, '08:00:00', '11:00:00'),
    (2, 4, '08:00:00', '11:00:00'),
    (2, 5, '08:00:00', '11:00:00'),
    (3, 1, '10:00:00', '19:30:00'),
    (3, 2, '10:00:00', '19:30:00'),
    (3, 3, '10:00:00', '19:30:00'),
    (3, 4, '10:00:00', '19:30:00'),
    (3, 5, '10:00:00', '15:00:00');

INSERT INTO cafeteria.station (id, location_id, station_name, station_description) VALUES
    (1, 1, 'Sandwich', 'Fresh made-to-order sandwiches'),
    (2, 1, 'Grill', 'Burgers, grilled items, and hot entrees'),
    (3, 1, 'Pizza', 'Hand-tossed pizzas with customizable toppings'),
    (4, 2, 'Breakfast Grill', 'Breakfast sandwiches, eggs, and pancakes'),
    (5, 3, 'Wraps', 'Fresh wraps with various fillings');

INSERT INTO cafeteria.ingredient_type (id, type_name) VALUES
    (1, 'Bread'),
    (2, 'Wraps'),
    (3, 'Meat'),
    (4, 'Cheese'),
    (5, 'Dressings'),
    (6, 'Toppings');

INSERT INTO cafeteria.ingredient (id, ingredient_name) VALUES
    (1, 'Spinach Wrap'),
    (2, 'Chipotle Wrap'),
    (3, 'Garlic-N-Herb'),
    (4, 'Ham'),
    (5, 'Turkey'),
    (6, 'Bacon'),
    (7, 'Grilled Chicken'),
    (8, 'American'),
    (9, 'Provolone'),
    (10, 'Cheddar'),
    (11, 'Pepper Jack'),
    (12, 'Swiss'),
    (13, 'Spinach'),
    (14, 'Lettuce'),
    (15, 'Olives'),
    (16, 'Cucumber'),
    (17, 'Tomato'),
    (18, 'Sprouts'),
    (19, 'Bell Pepper'),
    (20, 'Onions'),
    (21, 'Pickles'),
    (22, 'Banana Peppers'),
    (23, 'Oil'),
    (24, 'Vinegar'),
    (25, 'Mayo'),
    (26, '1000 Island'),
    (27, 'Italian'),
    (28, 'Caesar'),
    (29, 'Raspberry Vinaigrette'),
    (30, 'Honey Mustard'),
    (31, 'Mayonnaise'),
    (32, 'Mustard'),
    (33, 'Tuna Salad'),
    (34, 'Pastrami'),
    (35, 'Chicken Salad'),
    (36, 'Pretzel Bun'),
    (37, 'Marble Rye'),
    (38, 'Sourdough'),
    (39, 'Pita Bread'),
    (40, 'Wheat'),
    (41, 'Garlic Flat Bread'),
    (42, 'White Bread'),
    (43, 'Salad'),
    (44, 'Mozzarella'),
    (45, 'Romaine'),
    (46, 'Green Leaf'),
    (47, 'Pineapple'),
    (48, 'Mushrooms'),
    (49, 'Extra Cheese'),
    (50, 'Pepperoni'),
    (51, 'Bell Peppers'),
    (52, 'Sausage');

INSERT INTO cafeteria.ingredient_ingredient_type (ingredient_type_id, ingredient_id) VALUES
    (2, 1),
    (2, 2),
    (2, 3),
    (3, 4),
    (3, 5),
    (3, 6),
    (3, 7),
    (4, 8),
    (4, 9),
    (4, 10),
    (4, 11),
    (4, 12),
    (6, 13),
    (6, 14),
    (6, 15),
    (6, 16),
    (6, 17),
    (6, 18),
    (6, 19),
    (6, 20),
    (6, 21),
    (6, 22),
    (5, 23),
    (5, 24),
    (5, 25),
    (5, 26),
    (5, 27),
    (5, 28),
    (5, 29),
    (5, 30),
    (5, 31),
    (5, 32),
    (3, 33),
    (3, 34),
    (3, 35),
    (1, 36),
    (1, 37),
    (1, 38),
    (1, 39),
    (1, 40),
    (1, 41),
    (1, 42),
    (1, 43),
    (4, 44),
    (6, 45),
    (6, 46),
    (6, 47),
    (6, 48),
    (6, 49),
    (6, 50),
    (6, 51),
    (6, 52);

INSERT INTO cafeteria.food_item (station_id, item_description, item_price) VALUES
    (1, 'Pretzel Bun Sandwich',),
    (1, 'Marble Rye Sandwich',),
    (1, 'Sourdough Sandwich',),
    (1, 'Wheat Sandwich',),
    (1, 'Garlic Flat Bread Sandwich',),
    (1, 'White Bread Sandwich',),
    (1, 'Salad',),
    (2, 'Hamburger', ),
    (2, 'Cheeseburger', ),
    (2, 'Double Cheeseburger', ),
    (2, 'Bacon Cheeseburger', ),
    (2, 'Double Bacon Cheeseburger', ),
    (2, 'Turkey Burger', ),
    (2, 'Veggie Burger', ),
    (2, 'Grilled Chicken Sandwich', ),
    (2, 'Grilled Chicken Breast', ),
    (2, 'Breaded Chicken Breast', ),
    (2, 'Breaded Chicken Sandwich', ),
    (2, 'Philly Cheesesteak', ),
    (2, 'Chicken Cheesesteak', ),
    (2, 'Badger Burger', ),
    (2, 'BLT', ),
    (2, 'Fish Fillet', ),
    (2, 'Fish Fillet Sandwich', ),
    (2, 'Grilled Cheese', ),
    (2, 'Grilled Cheese and Ham', ),
    (2, 'Cheese Quesadilla', ),
    (2, 'Chicken Quesadilla', ),
    (2, 'Steak Quesadilla', ),
    (2, 'French Fries', ),
    (2, 'Waffle Fries', ),
    (2, 'Onion Rings', ),
    (2, 'Tater Tots', ),
    (2, 'Corn Dog', ),
    (2, 'Chicken Nuggets', ),
    (3, 'Single Pizza', ),
    (3, 'Large Pizza', ),
    (4, 'Breakfast Plate', ),
    (4, 'Omelette', ),
    (4, 'Breakfast Sandwich', ),
    (4, 'Breakfast Burrito', ),
    (4, 'French Toast', ),
    (4, '1 Pancake', ),
    (4, '2 Pancakes', ),
    (4, 'Biscuits & Gravy', ),
    (4, '2 Scrambled Eggs', ),
    (4, '2 Over Easy Eggs', ),
    (4, '2 Sunny Side Up Eggs', ),
    (4, 'Bacon', ),
    (4, 'Sausage Links', ),
    (4, 'Potatoes', ),
    (4, 'Tater Tots', ),
    (4, 'Toast', ),
    (5, 'Spinach Wrap', ),
    (5, 'Chipotle Wrap', ),
    (5, 'Garlic-N-Herb', ),
    (5, 'Salad', );